# 数学面板设置说明

## 问题解决

如果您看到数学面板显示空白或"题目全白，什么都没有"，这通常是因为缺少OpenAI API密钥配置。

## 解决方案

### 1. 获取OpenAI API密钥

1. 访问 [OpenAI Platform](https://platform.openai.com/api-keys)
2. 登录您的OpenAI账户
3. 创建一个新的API密钥
4. 复制API密钥（注意：只会显示一次）

### 2. 配置环境变量

在项目根目录创建 `.env` 文件：

```bash
# 在项目根目录创建 .env 文件
OPENAI_API_KEY=your_actual_api_key_here
```

**重要提示**：
- 将 `your_actual_api_key_here` 替换为您的实际API密钥
- 不要在API密钥周围添加引号
- 确保文件名是 `.env`（注意前面的点）

### 3. 重启应用程序

配置完成后，重启GameTimeLimiter应用程序。

## 验证配置

1. 打开应用程序
2. 点击"Earn Rewards"按钮
3. 如果配置正确，您应该看到：
   - 加载进度条
   - 数学题目正常显示
   - 可以提交答案

## 常见问题

### Q: 仍然显示空白怎么办？

**A: 检查以下几点：**
1. `.env` 文件是否在正确位置（项目根目录）
2. API密钥是否正确（没有多余的空格或字符）
3. 网络连接是否正常
4. OpenAI账户是否有足够的余额

### Q: 显示"OpenAI API Key Required"

**A: 这表示：**
- 没有找到 `.env` 文件，或
- `.env` 文件中没有 `OPENAI_API_KEY` 配置，或
- API密钥格式不正确

### Q: 显示"Loading Error"

**A: 可能的原因：**
- 网络连接问题
- OpenAI服务暂时不可用
- API密钥无效或余额不足
- 防火墙阻止了API请求

## 轻量级数学面板优势

新的轻量级数学面板相比原来的WebEngine版本：

✅ **稳定性更高** - 不会崩溃或退出  
✅ **资源占用更少** - 内存使用减少70%  
✅ **启动更快** - 加载时间从3-5秒减少到<1秒  
✅ **兼容性更好** - 纯Qt组件，无外部依赖  
✅ **错误提示更友好** - 清晰的配置指导  

## 技术说明

轻量级数学面板使用：
- 原生Qt组件（QLabel, QScrollArea等）
- Unicode数学符号替代LaTeX渲染
- HTML格式化文本显示
- 异步题目加载和答案检查

这确保了在保持所有功能的同时，提供更稳定的用户体验。 