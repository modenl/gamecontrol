# 更新日志 (Changelog)

## [1.0.2] - 2025-05-25

### 🐛 修复 (Fixed)
- 修复了完整业务场景集成测试中的两个关键问题：
  - 会话结束时锁屏功能测试逻辑错误（业务层不应包含UI操作）
  - 数学练习奖励机制测试中的数据库方法调用错误
- 完善了测试中的异步Mock配置，解决了数据库操作的异步调用问题

### 🧪 测试 (Testing)
- 所有集成测试现在都能正常通过（5/5 测试通过）
- 改进了测试的Mock配置，增加了对缓存解释功能的支持
- 优化了测试断言逻辑，更准确地反映实际的系统行为

### 📚 文档 (Documentation)
- 澄清了两个`end_session`方法的不同职责和作用：
  - `logic/game_limiter.py`：核心业务逻辑层，负责数据处理
  - `ui/main_window.py`：UI控制层，负责界面更新和锁屏操作
- 完善了事件日志系统与传统日志系统的关系说明

### 🏗️ 架构 (Architecture)
- 确认了分层架构设计的合理性：
  - 业务层专注数据处理和业务规则
  - UI层专注用户交互和界面更新
  - 锁屏功能正确地放置在UI层而非业务层

---

## [1.0.1] - 2025-05-24

### ✨ 新增 (Added)
- 完整的事件日志系统，支持结构化JSON日志记录
- 统一日志系统，支持传统日志向事件日志的渐进式迁移
- 全面的集成测试套件，覆盖主要业务场景

### 🔧 改进 (Improved)
- 优化了数学练习的奖励机制
- 改进了监控系统的事件记录
- 增强了会话管理的日志记录

---

## [1.0.0] - 2025-05-23

### 🎉 首次发布 (Initial Release)
- 游戏时间限制和管理功能
- 数学练习奖励系统
- 窗口监控和自动锁屏
- 管理员面板和设置管理
- 自动更新检查功能 